webpackJsonp([1],{GzR6:function(e,s){},NHnr:function(e,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var t=a("7+uW"),r={render:function(){var e=this.$createElement,s=this._self._c||e;return s("div",{attrs:{id:"app"}},[s("transition",{attrs:{name:"fade",mode:"out-in"}},[s("router-view")],1)],1)},staticRenderFns:[]};var n=a("VU/8")({name:"App"},r,!1,function(e){a("kH+h")},null,null).exports,i=a("/ocq"),o=a("Sazm"),l=a.n(o),d=Object(o.initializeApp)({apiKey:"AIzaSyAFwmILHGMUh-k2JbaPgLZRpB215hvNq08",authDomain:"cli-phonebook2.firebaseapp.com",databaseURL:"https://cli-phonebook2.firebaseio.com",projectId:"cli-phonebook2",storageBucket:"cli-phonebook2.appspot.com",messagingSenderId:"28993053688"}).database(),m=d.ref("phones"),c=(d.ref("users"),a("hlPV")),v={name:"Phones",components:{TheMask:c.TheMask},data:function(){return{title:"Phonebook",filter:"",phones:[],edit:!1,addedPhone:{name:"",number:""}}},firebase:{phones:m},computed:{allPhones:function(){return this.filteredPhones.length},filteredPhones:function(){var e=this,s=this.currentUser.uid;return this.phones.filter(function(a){return a.name.toLowerCase().includes(e.filter.toLowerCase())&&a.userId===s})},currentUser:function(){return l.a.auth().currentUser}},methods:{addPhone:function(){var e=this;this.$validator.validateAll().then(function(s){if(s){var a=e.currentUser.uid;m.push({name:e.addedPhone.name,number:e.addedPhone.number,userId:a,edit:!1}),e.addedPhone.name="",e.addedPhone.number="",e.$validator.reset()}})},editPhone:function(e){m.child(e).update({edit:!0})},removePhone:function(e){m.child(e).remove()},cancelEdit:function(e){m.child(e).update({edit:!1})},saveEdit:function(e){var s=this.currentUser.uid,a=e[".key"];m.child(a).set({name:e.name,number:e.number,userId:s,edit:!1})},logout:function(){var e=this;l.a.auth().signOut().then(function(){e.$router.replace("login")})}}},u={render:function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"row"},[a("div",{staticClass:"col s12 right-align logout"},[a("span",[e._v(e._s(e.currentUser.email))]),e._v(" "),a("a",{attrs:{href:"#"},on:{click:e.logout}},[e._v("Logout")])]),e._v(" "),a("div",{staticClass:"row"}),e._v(" "),a("h1",[e._v(e._s(e.title))]),e._v(" "),a("div",{staticClass:"input-field col s6 l5"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.addedPhone.name,expression:"addedPhone.name"},{name:"validate",rawName:"v-validate",value:"required|min:5|max:40|alpha_spaces",expression:"'required|min:5|max:40|alpha_spaces'"}],attrs:{type:"text",name:"name",id:"phone-name"},domProps:{value:e.addedPhone.name},on:{keydown:function(s){if(!("button"in s)&&e._k(s.keyCode,"enter",13,s.key,"Enter"))return null;s.preventDefault(),e.addPhone()},input:function(s){s.target.composing||e.$set(e.addedPhone,"name",s.target.value)}}}),e._v(" "),a("label",{attrs:{for:"phone-name"}},[e._v("Name")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("name"),expression:"errors.has('name')"}],staticClass:"error"},[e._v(e._s(e.errors.first("name")))])]),e._v(" "),a("div",{staticClass:"input-field col s6 l5"},[a("the-mask",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:19",expression:"'required|min:19'"}],attrs:{type:"text",mask:["+### (##)-###-##-##"],masked:!0,id:"phone-number",name:"number"},on:{keydown:function(s){if(!("button"in s)&&e._k(s.keyCode,"enter",13,s.key,"Enter"))return null;s.preventDefault(),e.addPhone()}},model:{value:e.addedPhone.number,callback:function(s){e.$set(e.addedPhone,"number",s)},expression:"addedPhone.number"}}),e._v(" "),a("label",{attrs:{for:"phone-number"}},[e._v("Number")]),e._v(" "),a("div",{staticClass:"error-block"},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("number"),expression:"errors.has('number')"}],staticClass:"error"},[e._v(e._s(e.errors.first("number")))])])],1),e._v(" "),a("button",{staticClass:"btn col s12 l2",attrs:{disabled:e.errors.has("name")||e.errors.has("number")},on:{click:function(s){e.addPhone()}}},[e._v("Add Phone")]),e._v(" "),a("div"),e._v(" "),a("h6",{staticClass:"col s12 right-align"},[e._v("Phones count: "+e._s(e.allPhones))]),e._v(" "),a("div",{staticClass:"input-field col offset-s7 s5 offset-l9 l3 right-align"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.filter,expression:"filter"}],attrs:{type:"text",id:"phones-filter"},domProps:{value:e.filter},on:{input:function(s){s.target.composing||(e.filter=s.target.value)}}}),e._v(" "),a("label",{attrs:{for:"phones-filter"}},[e._v("Filter by name")])]),e._v(" "),e.filteredPhones.length?a("div",[a("div",{staticClass:"hide-on-small-only"},[a("table",{staticClass:"highlight centered phones-table"},[e._m(0),e._v(" "),e._l(e.filteredPhones,function(s){return a("tbody",{key:s[".key"]},[s.edit?a("tr",[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:s.name,expression:"phone.name"},{name:"validate",rawName:"v-validate",value:"required|min:5|max:40",expression:"'required|min:5|max:40'"}],staticClass:"col offset-s3 s8 offset-m1 m10 offset-xl2 xl9 edit-phone",attrs:{type:"text",id:"phone-name",name:"edit-name"},domProps:{value:s.name},on:{input:function(a){a.target.composing||e.$set(s,"name",a.target.value)}}}),e._v(" "),a("div",{staticClass:"col edit-error-block"},[e.errors.has("edit-name")?a("span",{staticClass:"error"},[e._v(e._s(e.errors.first("edit-name")))]):e._e()])]),e._v(" "),a("td",[a("the-mask",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:19",expression:"'required|min:19'"}],staticClass:"col offset-s3 s8 offset-m2 m8 offset-xl3 xl7 edit-phone",attrs:{type:"text",id:"phone-number",name:"edit-number",mask:["+### (##)-###-##-##"],masked:!0},model:{value:s.number,callback:function(a){e.$set(s,"number",a)},expression:"phone.number"}}),e._v(" "),a("div",{staticClass:"edit-error-block"},[e.errors.has("edit-number")?a("span",{staticClass:"error"},[e._v(e._s(e.errors.first("edit-number")))]):e._e()])],1),e._v(" "),a("td",[a("button",{staticClass:"btn-small",attrs:{disabled:e.errors.has("edit-name")||e.errors.has("edit-number")},on:{click:function(a){e.saveEdit(s)}}},[e._v("Save")])]),e._v(" "),a("td",[a("button",{staticClass:"btn-small",on:{click:function(a){e.cancelEdit(s[".key"])}}},[e._v("Cancel")])])]):a("tr",[a("td",[e._v(e._s(s.name))]),e._v(" "),a("td",[e._v(e._s(s.number))]),e._v(" "),a("td",[a("button",{staticClass:"btn-small",on:{click:function(a){e.editPhone(s[".key"])}}},[e._v("Edit")])]),e._v(" "),a("td",[a("button",{staticClass:"btn-small",on:{click:function(a){e.removePhone(s[".key"])}}},[e._v("Remove")])])])])})],2)]),e._v(" "),a("div",{staticClass:"hide-on-med-and-up"},e._l(e.filteredPhones,function(s){return a("div",{key:s[".key"],staticClass:"col s12"},[s.edit?a("div",{staticClass:"card"},[a("div",{staticClass:"card-content"},[a("div",{staticClass:"row"},[a("input",{directives:[{name:"model",rawName:"v-model",value:s.name,expression:"phone.name"},{name:"validate",rawName:"v-validate",value:"required|min:5|max:40",expression:"'required|min:5|max:40'"}],staticClass:"col offset-s3 s6",attrs:{type:"text",id:"phone-name",name:"name"},domProps:{value:s.name},on:{input:function(a){a.target.composing||e.$set(s,"name",a.target.value)}}}),e._v(" "),a("the-mask",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:19",expression:"'required|min:19'"}],staticClass:"col offset-s3 s6",attrs:{type:"text",name:"number",mask:["+### (##)-###-##-##"],masked:!0,id:"phone-number"},model:{value:s.number,callback:function(a){e.$set(s,"number",a)},expression:"phone.number"}})],1)]),e._v(" "),a("div",{staticClass:"card-action"},[a("button",{staticClass:"btn",on:{click:function(a){e.saveEdit(s)}}},[e._v("Save")]),e._v(" "),a("button",{staticClass:"btn",on:{click:function(a){e.cancelEdit(s[".key"])}}},[e._v("Cancel")])])]):a("div",{staticClass:"card"},[a("div",{staticClass:"card-content"},[a("span",{staticClass:"card-title"},[e._v(e._s(s.name))]),e._v(" "),a("span",{staticClass:"card-title"},[e._v(e._s(s.number))])]),e._v(" "),a("div",{staticClass:"card-action"},[a("button",{staticClass:"btn",on:{click:function(a){e.editPhone(s[".key"])}}},[e._v("Edit")]),e._v(" "),a("button",{staticClass:"btn",on:{click:function(a){e.removePhone(s[".key"])}}},[e._v("Remove")])])])])}))]):a("div",[a("p",{staticClass:"col offset-s4 s4 not-found"},[e._v("Phones not found")])])])},staticRenderFns:[function(){var e=this.$createElement,s=this._self._c||e;return s("thead",[s("tr",[s("th",{attrs:{width:"35%"}},[this._v("Name")]),this._v(" "),s("th",{attrs:{width:"35%"}},[this._v("Number")]),this._v(" "),s("th",{attrs:{width:"30%",colspan:"2"}},[this._v("Action")])])])}]};var p=a("VU/8")(v,u,!1,function(e){a("GzR6")},"data-v-137eb97a",null).exports,h={name:"login",data:function(){return{email:"",password:"",message:"",hasError:!1}},methods:{signIn:function(){var e=this;e.message="",e.hasError=!1,l.a.auth().signInWithEmailAndPassword(this.email,this.password).then(function(s){e.hasError=!1,e.email="",e.password="",e.$validator.reset(),e.$router.replace("phones")},function(s){e.hasError=!0,s.message.includes("no user record corresponding")?e.message="Wrong email!":s.message.includes("password is invalid")?e.message="Password is invalid!":console.log("Error!!! "+s.message)})}}},f={render:function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"row"},[a("h3",[e._v("Sign In")]),e._v(" "),a("div",{staticClass:"col s12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col offset-s1 s10 offset-m3 m6 offset-l3 l6"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"},{name:"validate",rawName:"v-validate",value:"required|min:10|max:50|email",expression:"'required|min:10|max:50|email'"}],staticClass:"validate",attrs:{type:"email",name:"email",id:"user-email"},domProps:{value:e.email},on:{input:function(s){s.target.composing||(e.email=s.target.value)}}}),e._v(" "),a("label",{attrs:{for:"user-email"}},[e._v("Email")]),e._v(" "),a("div",{staticClass:"error-block"},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("email"),expression:"errors.has('email')"}],staticClass:"error"},[e._v(e._s(e.errors.first("email")))])])]),e._v(" "),a("div",{staticClass:"input-field col offset-s1 s10 offset-m3 m6 offset-l3 l6"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"},{name:"validate",rawName:"v-validate",value:"required|min:9|max:30",expression:"'required|min:9|max:30'"}],staticClass:"validate",attrs:{type:"password",name:"password",id:"user-password"},domProps:{value:e.password},on:{input:function(s){s.target.composing||(e.password=s.target.value)}}}),e._v(" "),a("label",{attrs:{for:"user-password"}},[e._v("Password")]),e._v(" "),a("div",{staticClass:"error-block"},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("password"),expression:"errors.has('password')"}],staticClass:"error"},[e._v(e._s(e.errors.first("password")))])])])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.hasError,expression:"hasError"}],staticClass:"row"},[a("div",{staticClass:"col offset-s2 s8 error"},[e._v(e._s(e.message))])]),e._v(" "),a("div",{staticClass:"row"},[a("button",{staticClass:"btn col offset-s1 s10 offset-m4 m4 offset-l4 l4",attrs:{disabled:e.errors.any()},on:{click:e.signIn}},[e._v("Enter")])]),e._v(" "),a("span",[e._v("or create new "),a("router-link",{attrs:{to:"/sign-up"}},[e._v("account")]),e._v(".")],1)])])},staticRenderFns:[]};var _=a("VU/8")(h,f,!1,function(e){a("U8VZ")},"data-v-42b3c054",null).exports,b={name:"signUp",data:function(){return{email:"",password:"",message:"",hasError:!1}},methods:{signUp:function(){var e=this;e.message="",e.hasError=!1,l.a.auth().createUserWithEmailAndPassword(this.email,this.password).then(function(s){e.message="Accout created successfully!",e.hasError=!1,e.email="",e.password="",e.$validator.reset(),e.$router.replace("phones")},function(s){console.log("Error!!!"+s.message),e.hasError=!0,e.message=s.message})}}},w={render:function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"row"},[a("h3",[e._v("Sign Up")]),e._v(" "),a("div",{staticClass:"col s12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col offset-s1 s10 offset-m3 m6 offset-l3 l6"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"},{name:"validate",rawName:"v-validate",value:"required|min:10|max:50|email",expression:"'required|min:10|max:50|email'"}],staticClass:"validate",attrs:{type:"email",name:"email",id:"user-email"},domProps:{value:e.email},on:{input:function(s){s.target.composing||(e.email=s.target.value)}}}),e._v(" "),a("label",{attrs:{for:"user-email"}},[e._v("Email")]),e._v(" "),a("div",{staticClass:"error-block"},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("email"),expression:"errors.has('email')"}],staticClass:"error"},[e._v(e._s(e.errors.first("email")))])])]),e._v(" "),a("div",{staticClass:"input-field col offset-s1 s10 offset-m3 m6 offset-l3 l6"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"},{name:"validate",rawName:"v-validate",value:"required|min:9|max:30",expression:"'required|min:9|max:30'"}],staticClass:"validate",attrs:{type:"password",name:"password",id:"user-password"},domProps:{value:e.password},on:{input:function(s){s.target.composing||(e.password=s.target.value)}}}),e._v(" "),a("label",{attrs:{for:"user-password"}},[e._v("Password")]),e._v(" "),a("div",{staticClass:"error-block"},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("password"),expression:"errors.has('password')"}],staticClass:"error"},[e._v(e._s(e.errors.first("password")))])])])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.hasError,expression:"hasError"}],staticClass:"row"},[a("div",{staticClass:"col offset-s2 s8 error"},[e._v(e._s(e.message))])]),e._v(" "),a("div",{staticClass:"row"},[a("button",{staticClass:"btn col offset-s1 s10 offset-m4 m4 offset-l4 l4",attrs:{disabled:e.errors.any()},on:{click:e.signUp}},[e._v("Sign Up")])]),e._v(" "),a("span",[e._v("or go back to "),a("router-link",{attrs:{to:"/login"}},[e._v("login")])],1)])])},staticRenderFns:[]};var g=a("VU/8")(b,w,!1,function(e){a("NLc/")},"data-v-05a75506",null).exports;t.a.use(i.a);var C=new i.a({routes:[{path:"*",redirect:"/login"},{path:"/",redirect:"/login"},{path:"/phones",name:"Phones",component:p,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:_},{path:"/sign-up",name:"SignUp",component:g}]});C.beforeEach(function(e,s,a){var t=l.a.auth().currentUser,r=e.matched.some(function(e){return e.meta.requiresAuth});r&&!t?a("login"):!r&&t?a("phones"):a()});var k=C,x=a("1mcD"),P=a.n(x),y=a("sUu7");t.a.config.productionTip=!1,t.a.use(P.a),t.a.use(y.a);l.a.auth().onAuthStateChanged(function(e){new t.a({el:"#app",router:k,components:{App:n},template:"<App/>"})})},"NLc/":function(e,s){},U8VZ:function(e,s){},"kH+h":function(e,s){}},["NHnr"]);
//# sourceMappingURL=app.5bb18ad2b2ee4e53fdbe.js.map